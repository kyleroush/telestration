(this["webpackJsonpbowl-game"]=this["webpackJsonpbowl-game"]||[]).push([[0],{1334:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(32),o=a.n(l),i=(a(598),a(56)),c=a(57),s=a(59),u=a(58),m=a(1372),p=a(1392),d=a(1379),f=a(1382),h=a(1380),v=a(1381),g=a(1378),E=a(1336),y=a(182),b=a.n(y);b.a.initializeApp({apiKey:"AIzaSyDYIdFDQ3ccmgUHsEJC7EQuPGyX3U0BKoM",authDomain:"reactemoji.firebaseapp.com",databaseURL:"https://reactemoji.firebaseio.com",projectId:"reactemoji",storageBucket:"reactemoji.appspot.com",messagingSenderId:"720480809303",appId:"1:720480809303:web:c82a2de9d2d14ab1a9ce12",measurementId:"G-C64FSH40V9"}),b.a.analytics();var k=b.a.database(),j=(b.a.firestore(),"Telestration"),S={waiting:"waiting",playing:"playing",reviewing:"reviewing"},C=S,O=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).create=function(){var e=document.getElementById("session").value.toUpperCase();""===e&&(e=Math.random().toString(36).substring(2,10).toUpperCase()),k.ref("".concat(j,"/").concat(e)).once("value",(function(t){if(null===t.val()){var a=n.state.config;k.ref("".concat(j,"/").concat(e)).update({session:e,config:a,gameState:S.waiting}),n.props.setAppState({session:e,config:a}),window.history.pushState({},e,"?session=".concat(e))}else console.log("already exisit")}))},n.join=function(){var e=document.getElementById("session").value.toUpperCase(),t=n.state.config;k.ref("".concat(j,"/").concat(e)).once("value",(function(a){null!==a.val()?(n.props.setAppState({session:e,config:t}),window.history.pushState({},e,"?session=".concat(e))):console.log("doesnt exisit")}))},n._render_actions=function(){return r.a.createElement("div",null,r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"create",onClick:function(){return n.setState({action:n.action_enum.cerate})}},"Create New Session"),r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:function(){return n.setState({action:n.action_enum.join})}},"Join Session"))},n._render_create=function(){var e=n.state.open;return r.a.createElement("div",null,r.a.createElement("h1",null,"create"),r.a.createElement(p.a,{id:"session",label:"Session",variant:"outlined"}),r.a.createElement(g.a,null,r.a.createElement(E.a,{button:!0,onClick:function(){return n.setState({open:!e})}},r.a.createElement(d.a,{primary:"Config"}),e?r.a.createElement(h.a,null):r.a.createElement(v.a,null)),r.a.createElement(f.a,{in:e,timeout:"auto",unmountOnExit:!0},r.a.createElement(g.a,null))),r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"create",onClick:n.create},"Create New Session"))},n._render_join=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"join"),r.a.createElement(p.a,{id:"session",label:"Session",variant:"outlined"}),r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"create",onClick:n.join},"Join"))},n.state={action:null,config:{startingDice:5},open:!1},n.action_enum={create:"create",join:"join"},n}return Object(c.a)(a,[{key:"render",value:function(){return null===this.state.action?this._render_actions():this.state.action===this.action_enum.cerate?this._render_create():this.state.action===this.action_enum.join?this._render_join():void 0}}]),a}(r.a.Component),w=a(1383),_=Object(w.a)((function(e){return{margin:{margin:e.spacing(1)},extendedIcon:{marginRight:e.spacing(1)}}}));var x=function(e){return r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(p.a,{id:"name",label:"Name",variant:"outlined"}),r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",className:_().margin,onClick:function(){var t=e.session,a=document.getElementById("name").value.toUpperCase();k.ref("".concat(j,"/").concat(t,"/players/").concat(a)).once("value",(function(n){null===n.val()?(k.ref("".concat(j,"/").concat(t,"/players/").concat(a)).update({player:a,on:0,aviable:0}),e.setAppState({player:a}),window.history.pushState({},t,"?session=".concat(t,"&player=").concat(a))):console.log("already exist")}))}},"Create player")))},U=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).kickPlayer=function(e){var t=n.props,a=t.session,r=t.players,l=t.order;r[e]={},l=(l=l||[]).filter((function(t){return e!==t})),k.ref("".concat(j,"/").concat(a,"/")).update({players:r,order:l})},n.state={open:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.players,n=t.order;n=n||Object.keys(a);var l=this.state.open;return r.a.createElement(g.a,null,r.a.createElement(E.a,{button:!0,onClick:function(){return e.setState({open:!l})}},r.a.createElement(d.a,{primary:"Players"}),l?r.a.createElement(h.a,null):r.a.createElement(v.a,null)),r.a.createElement(f.a,{in:l,timeout:"auto",unmountOnExit:!0},r.a.createElement(g.a,null,n.map((function(t){return r.a.createElement(E.a,{key:t},r.a.createElement(d.a,null,"player: ",t),r.a.createElement(m.a,{variant:"extended",color:"secondary","aria-label":"join",onClick:function(){return e.kickPlayer(t)}},"Kick Player from Game"))})))))}}]),a}(r.a.Component),T=a(232),W=a(90),P=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={page:0,person:0},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.order,n=t.artSets,l=this.state,o=l.page,i=l.person,c=n[a[i]][o];return r.a.createElement("div",null,r.a.createElement("h3",null,"Results"),r.a.createElement(T.a,null,"the title was ",c.title," (from: ",c.titleFrom,")"),r.a.createElement(W.SketchField,{name:"sketch",className:"canvas-area",ref:function(t){return e._sketch=t},lineWidth:0,fillColor:"transparent",backgroundColor:"transparent",lineColor:"transparent",width:420,height:420,value:c.image}),r.a.createElement(T.a,null,"(by: ",c.imageFrom,")"),!!c.guess&&r.a.createElement(T.a,null,"the guess was ",c.guess," (from: ",c.guessFrom,")"),r.a.createElement("div",null,o>0&&r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:function(){return e.setState({page:o-1})}},"Prev Page"),o+1<n[a[i]].length&&!!n[a[i]][o+1].image&&r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:function(){return e.setState({page:o+1})}},"Next Page")),r.a.createElement("div",null,i>0&&r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:function(){return e.setState({person:i-1,page:0})}},"Prev Person"),i+1<a.length&&r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:function(){return e.setState({person:i+1,page:0})}},"Next Person")))}}]),a}(r.a.Component),N=a(1384),I=a(1391),F=a(1387),D=a(1394),R=a(1385),M=a(1386),B=a(582),G=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._renderWaiting=function(){var e=n.state.players;return r.a.createElement("div",null,r.a.createElement("h3",null,"Waiting for game to start"),Object.keys(e).length>1&&r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:n.startGame},"Start Game"))},n.shuffle=function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e},n.startGame=function(){var e=n.props.session,t=n.state.players;k.ref("".concat(j,"/").concat(e)).update({order:n.shuffle(Object.keys(t)),gameState:C.playing,max:Object.keys(t).length})},n.findOffset=function(){var e=n.state.order,t=n.props.player,a=-1;return e.forEach((function(e,n){t===e&&(a=n)})),a},n._renderPlaying=function(){var e=n.state,t=e.artSets,a=e.order,l=e.players,o=e.max,i=e.toolkitOpen,c=e.canRedo,s=e.canUndo,u=n.props.player;t=t||[];var y=n.findOffset(),b=l[u],k=b.on,j=b.aviable;if(k>=o)return r.a.createElement("div",null,r.a.createElement(T.a,null,"Waiting for game to end"));if(k>j)return r.a.createElement("div",null,r.a.createElement(T.a,null,"Waiting on more stuff"));var S=t[a[(a.length+(y-k)%a.length)%a.length]],C=(S=S||[])[S.length-1]||{};return r.a.createElement("div",null,C.title?!C.image&&r.a.createElement(T.a,null,"The Title is ",C.title):r.a.createElement(p.a,{id:"title",label:"Title",variant:"outlined"}),!C.image&&r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(E.a,{button:!0,onClick:function(){return n.setState({toolkitOpen:!i})}},r.a.createElement(d.a,{primary:"Toolkit"}),i?r.a.createElement(h.a,null):r.a.createElement(v.a,null)),r.a.createElement(f.a,{in:i,timeout:"auto",unmountOnExit:!0},r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(N.a,{disabled:!s,onClick:n._undo},r.a.createElement(R.a,null)),r.a.createElement(N.a,{disabled:!c,onClick:n._redo},r.a.createElement(M.a,null))),r.a.createElement(E.a,null,r.a.createElement(d.a,null,"Tool:"),r.a.createElement(I.a,{labelId:"tools",id:"tools",value:n.state.tool,onChange:function(e){"eraser"!==e.target.value?n.setState({tool:e.target.value}):n.setState({tool:W.Tools.Pencil,lineColor:"#fffff0"})}},r.a.createElement(F.a,{value:W.Tools.Pencil},"Pencil"),r.a.createElement(F.a,{value:W.Tools.Line},"Line"),r.a.createElement(F.a,{value:W.Tools.Rectangle},"Rectangle"),r.a.createElement(F.a,{value:W.Tools.Circle},"Circle"),r.a.createElement(F.a,{value:"eraser"},"Eraser"))),r.a.createElement(E.a,null,r.a.createElement(d.a,null,"line color:"),r.a.createElement(B.BlockPicker,{triangle:"hide",color:n.state.lineColor,onChange:function(e){return n.setState({lineColor:e.hex})}})),r.a.createElement(E.a,null,r.a.createElement(d.a,null,"Width:"),r.a.createElement(D.a,{defaultValue:n.state.lineWidth,valueLabelDisplay:"auto",step:1,min:1,max:25,onChange:function(e,t){return n.setState({lineWidth:t})}})))))),r.a.createElement(W.SketchField,{name:"sketch",className:"canvas-area",ref:function(e){return n._sketch=e},lineColor:n.state.lineColor,lineWidth:C.image?0:n.state.lineWidth,fillColor:"#fffff0",backgroundColor:"#fffff0",width:420,height:420,tool:n.state.tool,value:C.image,onChange:n._onSketchChange}),!!C.image&&r.a.createElement(p.a,{id:"guess",label:"Guess",variant:"outlined"}),r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:n.submit},"Submit"))},n._onSketchChange=function(){var e=n.state.canUndo,t=n._sketch.canUndo();e!==t&&n.setState({canUndo:t})},n._undo=function(){n._sketch.undo(),n.setState({canUndo:n._sketch.canUndo(),canRedo:n._sketch.canRedo()})},n._redo=function(){n._sketch.redo(),n.setState({canUndo:n._sketch.canUndo(),canRedo:n._sketch.canRedo()})},n.submit=function(){var e=n.props,t=e.player,a=e.session,r=n.state,l=r.order,o=r.players,i=r.artSets,c=document.getElementById("title"),s=document.getElementById("guess");i=i||[];var u=n.findOffset(),m=o[t].on,p=l[(l.length+(u-m)%l.length)%l.length],d=i[p]||[];c&&(c=c.value,d.push({title:c,titleFrom:t}));var f=d[d.length-1];s?(f.guess=s.value,d[d.length-1]=f,f.guessFrom=t,d.push({title:s.value,titleFrom:t}),s.value=""):(f.image=JSON.stringify(n._sketch.toJSON()),f.imageFrom=t,d[d.length-1]=f);var h={};h[p]=d,k.ref("".concat(j,"/").concat(a,"/artSets/")).update(h),k.ref("".concat(j,"/").concat(a,"/players/").concat(t)).update({on:m+1});var v=l[(u+1)%l.length],g=o[v].aviable;k.ref("".concat(j,"/").concat(a,"/players/").concat(v)).update({aviable:g+1})},n.state={loading:!0,lineWidth:5,lineColor:"black",tool:W.Tools.Pencil,toolkitOpen:!1,canRedo:!1,canUndo:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.session;k.ref("".concat(j,"/").concat(t)).on("value",(function(t){var a=t.val(),n=a.players,r=a.gameState,l=a.order,o=a.artSets,i=a.max;r===C.playing&&(r=C.reviewing,l.forEach((function(e){n[e].on<i&&(r=C.playing)}))),e.setState({loading:!1,gameState:r,players:n,order:l,artSets:o,max:i})}))}},{key:"render",value:function(){var e=this.props.session,t=this.state,a=t.loading,n=t.gameState,l=t.players,o=t.order,i=t.artSets;return a?r.a.createElement("h2",null,"loading..."):r.a.createElement("div",null,n===C.waiting&&this._renderWaiting(),n===C.playing&&this._renderPlaying(),n===C.reviewing&&r.a.createElement(P,{order:o,artSets:i}),r.a.createElement(U,{players:l,order:o,session:e}))}}]),a}(r.a.Component),A=a(1388),J=a(1389),L=a(583),V=a.n(L),H=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(T.a,{variant:"h6"},"How To Play"),r.a.createElement(T.a,null,"1) Either create or join a session."),r.a.createElement(T.a,null,"2) Wait for all the other players to join then click start."),r.a.createElement(T.a,null,"3) Enter the Title of your image and draw it. When done hit submit."),r.a.createElement(T.a,null,"4) Wait for the person before you to finish there round."),r.a.createElement(T.a,null,"5) When you recieve an image you guess what the title should be. When you get a Title draw the image."),r.a.createElement(T.a,null,"6) When everything is done review the images!"))}}]),a}(r.a.Component),Q=a(585),K=a(584),z=a.n(K),Y=a(1390),X=a(122),$=a.n(X),q=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={open:!1,el:null},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"grow"},r.a.createElement(A.a,{position:"static"},r.a.createElement(J.a,null,r.a.createElement(T.a,{className:{grow:{flexGrow:1},sectionDesktop:{display:"none"}}.title,variant:"h6",noWrap:!0},this.props.name),r.a.createElement("div",{className:"grow"}),r.a.createElement("div",{className:"sectionDesktop"},r.a.createElement($.a,{variant:"popover",popupId:"info-popup"},(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,Object.assign({color:"inherit"},Object(X.bindTrigger)(e)),r.a.createElement(V.a,null)),r.a.createElement(Q.a,Object(X.bindMenu)(e),r.a.createElement(H,null)))})),r.a.createElement($.a,{variant:"popover",popupId:"menu-popup"},(function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,Object.assign({color:"inherit"},Object(X.bindTrigger)(t)),r.a.createElement(z.a,null)),r.a.createElement(Q.a,Object(X.bindMenu)(t),r.a.createElement(F.a,{onClick:function(){return window.location.href="/".concat(e.props.repo)}},"To Home Page"),e.props.reset&&r.a.createElement("div",null,r.a.createElement(F.a,{onClick:e.props.reset},"Reset Session"),r.a.createElement(Y.a,null)),e.props.session&&r.a.createElement("div",null,r.a.createElement(F.a,null,"To share"),r.a.createElement(F.a,null,r.a.createElement(p.a,{value:"https://kyleroush.github.io/".concat(e.props.repo,"/?session=").concat(e.props.session)})),r.a.createElement(F.a,null,"Copy Url"),r.a.createElement(Y.a,null)),r.a.createElement(F.a,{onClick:function(){return window.location.href="http://www.github.com/kyleroush/".concat(e.props.repo,"/issues")}},"Log issue")))}))))))}}]),a}(r.a.Component),Z=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getQueryVariables=function(){for(var e=window.location.search.substring(1).split("&"),t={},a=0;a<e.length;a++){var n=e[a].split("=");t[n[0]]=n[1]}return t},n.setValue=function(e){n.setState(e)},n.reset=function(){var e=n.state.session;k.ref("".concat(j,"/").concat(e)).once("value",(function(t){var a={};Object.keys(t.val().players).forEach((function(e){a[e]={name:e,on:0,aviable:0}})),k.ref("".concat(j,"/").concat(e)).update({gameState:C.waiting,order:[],artSets:{},max:null,players:a})}))},n.state={session:null,player:null},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.getQueryVariables(),a=t.session,n=t.player;a&&(a=a.toUpperCase(),k.ref("".concat(j,"/").concat(a)).once("value",(function(t){null!==t.val()&&(e.setState({session:a,config:t.val().config}),n&&(n=n.toUpperCase(),k.ref("".concat(j,"/").concat(a,"/players/").concat(n)).once("value",(function(t){null!==t.val()&&e.setState({player:n})}))))})))}},{key:"render",value:function(){var e=this.state,t=e.session,a=e.player;return r.a.createElement("div",null,r.a.createElement(q,{session:t,name:"telestration",repo:"telestration",reset:this.reset}),t&&r.a.createElement("h2",null,"You ",a&&"(".concat(a,")")," are part of session ",t," "),null==t&&r.a.createElement(O,{setAppState:this.setValue}),null!=t&&null==a&&r.a.createElement(x,{session:t,setAppState:this.setValue}),null!=t&&null!=a&&r.a.createElement(G,{session:t,player:a}))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},593:function(e,t,a){e.exports=a(1334)},598:function(e,t,a){},654:function(e,t){},656:function(e,t){},665:function(e,t){},667:function(e,t){},692:function(e,t){},694:function(e,t){},695:function(e,t){},701:function(e,t){},703:function(e,t){},721:function(e,t){},724:function(e,t){},740:function(e,t){},743:function(e,t){},748:function(e,t){},750:function(e,t){},773:function(e,t){},879:function(e,t){},880:function(e,t){},913:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=913},945:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=945}},[[593,1,2]]]);
//# sourceMappingURL=main.5f0dd85d.chunk.js.map