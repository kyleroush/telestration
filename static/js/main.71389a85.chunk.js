(this["webpackJsonpbowl-game"]=this["webpackJsonpbowl-game"]||[]).push([[0],{1072:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(29),i=a.n(o),l=(a(498),a(70)),c=a(71),s=a(74),u=a(72),m=a(1102),p=a(1113),f=a(1108),d=a(1111),v=a(1109),g=a(1110),h=a(1106),y=a(1107),E=a(155),b=a.n(E);b.a.initializeApp({apiKey:"AIzaSyDYIdFDQ3ccmgUHsEJC7EQuPGyX3U0BKoM",authDomain:"reactemoji.firebaseapp.com",databaseURL:"https://reactemoji.firebaseio.com",projectId:"reactemoji",storageBucket:"reactemoji.appspot.com",messagingSenderId:"720480809303",appId:"1:720480809303:web:c82a2de9d2d14ab1a9ce12",measurementId:"G-C64FSH40V9"}),b.a.analytics();var j=b.a.database(),k=(b.a.firestore(),"Telestration"),S={waiting:"waiting",playing:"playing",reviewing:"reviewing"},C=S,O=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).create=function(){var e=document.getElementById("session").value.toUpperCase();""===e&&(e=Math.random().toString(36).substring(2,10).toUpperCase()),j.ref("".concat(k,"/").concat(e)).once("value",(function(t){if(null===t.val()){var a=n.state.config;j.ref("".concat(k,"/").concat(e)).update({session:e,config:a,gameState:S.waiting}),n.props.setAppState({session:e,config:a}),window.history.pushState({},e,"?session=".concat(e))}else console.log("already exisit")}))},n.join=function(){var e=document.getElementById("session").value.toUpperCase(),t=n.state.config;j.ref("".concat(k,"/").concat(e)).once("value",(function(a){null!==a.val()?(n.props.setAppState({session:e,config:t}),window.history.pushState({},e,"?session=".concat(e))):console.log("doesnt exisit")}))},n._render_actions=function(){return r.a.createElement("div",null,r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"create",onClick:function(){return n.setState({action:n.action_enum.cerate})}},"Create New Session"),r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:function(){return n.setState({action:n.action_enum.join})}},"Join Session"))},n._render_create=function(){var e=n.state.open;return r.a.createElement("div",null,r.a.createElement("h1",null,"create"),r.a.createElement(p.a,{id:"session",label:"Session",variant:"outlined"}),r.a.createElement(h.a,null,r.a.createElement(y.a,{button:!0,onClick:function(){return n.setState({open:!e})}},r.a.createElement(f.a,{primary:"Config"}),e?r.a.createElement(v.a,null):r.a.createElement(g.a,null)),r.a.createElement(d.a,{in:e,timeout:"auto",unmountOnExit:!0},r.a.createElement(h.a,null))),r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"create",onClick:n.create},"Create New Session"))},n._render_join=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"join"),r.a.createElement(p.a,{id:"session",label:"Session",variant:"outlined"}),r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"create",onClick:n.join},"Join"))},n.state={action:null,config:{startingDice:5},open:!1},n.action_enum={create:"create",join:"join"},n}return Object(c.a)(a,[{key:"render",value:function(){return null===this.state.action?this._render_actions():this.state.action===this.action_enum.cerate?this._render_create():this.state.action===this.action_enum.join?this._render_join():void 0}}]),a}(r.a.Component),w=a(1112),_=Object(w.a)((function(e){return{margin:{margin:e.spacing(1)},extendedIcon:{marginRight:e.spacing(1)}}}));var x=function(e){return r.a.createElement(h.a,null,r.a.createElement(y.a,null,r.a.createElement(p.a,{id:"name",label:"Name",variant:"outlined"}),r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",className:_().margin,onClick:function(){var t=e.session,a=document.getElementById("name").value.toUpperCase();j.ref("".concat(k,"/").concat(t,"/players/").concat(a)).once("value",(function(n){null===n.val()?(j.ref("".concat(k,"/").concat(t,"/players/").concat(a)).update({player:a,on:0,aviable:0}),e.setAppState({player:a}),window.history.pushState({},t,"?session=".concat(t,"&player=").concat(a))):console.log("already exist")}))}},"Create player")))},N=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).kickPlayer=function(e){var t=n.props,a=t.session,r=t.players,o=t.order;r[e]={},o=(o=o||[]).filter((function(t){return e!==t})),j.ref("".concat(k,"/").concat(a,"/")).update({players:r,order:o})},n.state={open:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.players,n=t.order;n=n||Object.keys(a);var o=this.state.open;return r.a.createElement(h.a,null,r.a.createElement(y.a,{button:!0,onClick:function(){return e.setState({open:!o})}},r.a.createElement(f.a,{primary:"Players"}),o?r.a.createElement(v.a,null):r.a.createElement(g.a,null)),r.a.createElement(d.a,{in:o,timeout:"auto",unmountOnExit:!0},r.a.createElement(h.a,null,n.map((function(t){return r.a.createElement(y.a,{key:t},r.a.createElement(f.a,null,"player: ",t),r.a.createElement(m.a,{variant:"extended",color:"secondary","aria-label":"join",onClick:function(){return e.kickPlayer(t)}},"Kick Player from Game"))})))))}}]),a}(r.a.Component),P=a(190),I=a(154),U=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={page:0,person:0},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.order,n=t.artSets,o=this.state,i=o.page,l=o.person,c=n[a[l]][i];return r.a.createElement("div",null,r.a.createElement("h3",null,"Results"),r.a.createElement(P.a,null,"the title was ",c.title),r.a.createElement(I.SketchField,{name:"sketch",className:"canvas-area",ref:function(t){return e._sketch=t},lineWidth:0,fillColor:"transparent",backgroundColor:"transparent",lineColor:"transparent",width:420,height:420,value:c.image}),!!c.guess&&r.a.createElement(P.a,null,"the guess was ",c.guess),r.a.createElement("div",null,i>0&&r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:function(){return e.setState({page:i-1})}},"Prev Page"),i+1<n[a[l]].length&&!!n[a[l]][i+1].image&&r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:function(){return e.setState({page:i+1})}},"Next Page")),r.a.createElement("div",null,l>0&&r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:function(){return e.setState({person:l-1,page:0})}},"Prev Person"),l+1<a.length&&r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:function(){return e.setState({person:l+1,page:0})}},"Next Person")))}}]),a}(r.a.Component),W=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e))._renderWaiting=function(){var e=n.state.players;return r.a.createElement("div",null,r.a.createElement("h3",null,"Waiting for game to start"),Object.keys(e).length>1&&r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:n.startGame},"Start Game"))},n.shuffle=function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e},n.startGame=function(){var e=n.props.session,t=n.state.players;j.ref("".concat(k,"/").concat(e)).update({order:n.shuffle(Object.keys(t)),gameState:C.playing,max:Object.keys(t).length})},n.findOffset=function(){var e=n.state.order,t=n.props.player,a=-1;return e.forEach((function(e,n){t===e&&(a=n)})),a},n._renderPlaying=function(){var e=n.state,t=e.artSets,a=e.order,o=e.players,i=e.max,l=n.props.player;t=t||[];var c=n.findOffset(),s=o[l],u=s.on,f=s.aviable;if(u>=i)return r.a.createElement("div",null,r.a.createElement(P.a,null,"Waiting for game to end"));if(u>f)return r.a.createElement("div",null,r.a.createElement(P.a,null,"Waiting on more stuff"));var d=t[a[(a.length+c-u)%a.length]],v=(d=d||[])[d.length-1]||{};return r.a.createElement("div",null,v.title?!v.image&&r.a.createElement(P.a,null,"The Title is ",v.title):r.a.createElement(p.a,{id:"title",label:"Title",variant:"outlined"}),r.a.createElement(I.SketchField,{name:"sketch",className:"canvas-area",ref:function(e){return n._sketch=e},lineColor:n.state.lineColor,lineWidth:v.image?0:n.state.lineWidth,fillColor:"transparent",backgroundColor:"#fffff0",width:420,height:420,tool:n.state.tool,value:void 0===v.image?n.empty_convas:v.image}),!!v.image&&r.a.createElement(p.a,{id:"guess",label:"Guess",variant:"outlined"}),r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:n.submit},"Submit"))},n.submit=function(){var e=n.props,t=e.player,a=e.session,r=n.state,o=r.order,i=r.players,l=r.artSets,c=document.getElementById("title"),s=document.getElementById("guess");l=l||[];var u=n.findOffset(),m=i[t].on,p=o[(o.length+u-m)%o.length],f=l[p]||[];c&&(c=c.value,f.push({title:c}));var d=f[f.length-1];s?(d.guess=s.value,f[f.length-1]=d,f.push({title:s.value}),s.value=""):(d.image=JSON.stringify(n._sketch.toJSON()),f[f.length-1]=d);var v={};v[p]=f,j.ref("".concat(k,"/").concat(a,"/artSets/")).update(v),j.ref("".concat(k,"/").concat(a,"/players/").concat(t)).update({on:m+1});var g=o[(1+u)%o.length],h=i[g].aviable;j.ref("".concat(k,"/").concat(a,"/players/").concat(g)).update({aviable:h+1})},n.state={loading:!0,lineWidth:5,lineColor:"black",tool:I.Tools.Pencil},n.empty_convas='{"version":"2.4.3","objects":[],"background":"#fffff0"}',n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.session;j.ref("".concat(k,"/").concat(t)).on("value",(function(t){var a=t.val(),n=a.players,r=a.gameState,o=a.order,i=a.artSets,l=a.max;r===C.playing&&(r=C.reviewing,o.forEach((function(e){n[e].on<l&&(r=C.playing)}))),e.setState({loading:!1,gameState:r,players:n,order:o,artSets:i,max:l})}))}},{key:"render",value:function(){var e=this.props.session,t=this.state,a=t.loading,n=t.gameState,o=t.players,i=t.order,l=t.artSets;return a?r.a.createElement("h2",null,"loading..."):r.a.createElement("div",null,n===C.waiting&&this._renderWaiting(),n===C.playing&&this._renderPlaying(),n===C.reviewing&&r.a.createElement(U,{order:i,artSets:l}),r.a.createElement(N,{players:o,order:i,session:e}))}}]),a}(r.a.Component),D=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getQueryVariables=function(){for(var e=window.location.search.substring(1).split("&"),t={},a=0;a<e.length;a++){var n=e[a].split("=");t[n[0]]=n[1]}return t},n.setValue=function(e){n.setState(e)},n.state={session:null,player:null},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.getQueryVariables(),a=t.session,n=t.player;a&&(a=a.toUpperCase(),j.ref("".concat(k,"/").concat(a)).once("value",(function(t){null!==t.val()&&(e.setState({session:a,config:t.val().config}),n&&(n=n.toUpperCase(),j.ref("".concat(k,"/").concat(a,"/players/").concat(n)).once("value",(function(t){null!==t.val()&&e.setState({player:n})}))))})))}},{key:"render",value:function(){var e=this.state,t=e.session,a=e.player;return r.a.createElement("div",null,r.a.createElement("h1",null,"Telestrations"),t&&r.a.createElement("h2",null,"You ",a&&"(".concat(a,")")," are part of session ",t," "),null==t&&r.a.createElement(O,{setAppState:this.setValue}),null!=t&&null==a&&r.a.createElement(x,{session:t,setAppState:this.setValue}),null!=t&&null!=a&&r.a.createElement(W,{session:t,player:a}))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},493:function(e,t,a){e.exports=a(1072)},498:function(e,t,a){},559:function(e,t){},561:function(e,t){},570:function(e,t){},572:function(e,t){},597:function(e,t){},599:function(e,t){},600:function(e,t){},606:function(e,t){},608:function(e,t){},626:function(e,t){},629:function(e,t){},645:function(e,t){},648:function(e,t){},653:function(e,t){},655:function(e,t){},678:function(e,t){},784:function(e,t){},785:function(e,t){},818:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=818},850:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=850}},[[493,1,2]]]);
//# sourceMappingURL=main.71389a85.chunk.js.map