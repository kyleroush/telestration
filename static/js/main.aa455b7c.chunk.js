(this["webpackJsonpbowl-game"]=this["webpackJsonpbowl-game"]||[]).push([[0],{1383:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(33),l=a.n(o),i=(a(618),a(60)),c=a(61),s=a(63),u=a(62),m=a(1420),p=a(1440),d=a(1427),f=a(1430),h=a(1428),g=a(1429),v=a(1426),E=a(1385),y=a(191),b=a.n(y);b.a.initializeApp({apiKey:"AIzaSyDYIdFDQ3ccmgUHsEJC7EQuPGyX3U0BKoM",authDomain:"reactemoji.firebaseapp.com",databaseURL:"https://reactemoji.firebaseio.com",projectId:"reactemoji",storageBucket:"reactemoji.appspot.com",messagingSenderId:"720480809303",appId:"1:720480809303:web:39b5d0faef073010a9ce12",measurementId:"G-46CVFFLWX6"}),b.a.analytics();var k=b.a.database(),j=(b.a.firestore(),"Telestration"),S={waiting:"waiting",playing:"playing",reviewing:"reviewing"},w=S,C=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).create=function(){var e=document.getElementById("session").value.toUpperCase();""===e&&(e=Math.random().toString(36).substring(2,10).toUpperCase()),k.ref("".concat(j,"/").concat(e)).once("value",(function(t){if(null===t.val()){var a=n.state.config;k.ref("".concat(j,"/").concat(e)).update({session:e,config:a,gameState:S.waiting}),n.props.setAppState({session:e,config:a}),window.history.pushState({},e,"?session=".concat(e))}else console.log("already exisit")}))},n.join=function(){var e=document.getElementById("session").value.toUpperCase(),t=n.state.config;k.ref("".concat(j,"/").concat(e)).once("value",(function(a){null!==a.val()?(n.props.setAppState({session:e,config:t}),window.history.pushState({},e,"?session=".concat(e))):console.log("doesnt exisit")}))},n._render_actions=function(){return r.a.createElement("div",null,r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"create",onClick:function(){return n.setState({action:n.action_enum.cerate})}},"Create New Session"),r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:function(){return n.setState({action:n.action_enum.join})}},"Join Session"))},n._render_create=function(){var e=n.state.open;return r.a.createElement("div",null,r.a.createElement("h1",null,"create"),r.a.createElement(p.a,{id:"session",label:"Session",variant:"outlined"}),r.a.createElement(v.a,null,r.a.createElement(E.a,{button:!0,onClick:function(){return n.setState({open:!e})}},r.a.createElement(d.a,{primary:"Config"}),e?r.a.createElement(h.a,null):r.a.createElement(g.a,null)),r.a.createElement(f.a,{in:e,timeout:"auto",unmountOnExit:!0},r.a.createElement(v.a,null))),r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"create",onClick:n.create},"Create New Session"))},n._render_join=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"join"),r.a.createElement(p.a,{id:"session",label:"Session",variant:"outlined"}),r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"create",onClick:n.join},"Join"))},n.state={action:null,config:{startingDice:5},open:!1},n.action_enum={create:"create",join:"join"},n}return Object(c.a)(a,[{key:"render",value:function(){return null===this.state.action?this._render_actions():this.state.action===this.action_enum.cerate?this._render_create():this.state.action===this.action_enum.join?this._render_join():void 0}}]),a}(r.a.Component),O=a(1431),_=function(e,t){document.cookie=e+"="+t+";"},x=function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var r=a[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},W=Object(O.a)((function(e){return{margin:{margin:e.spacing(1)},extendedIcon:{marginRight:e.spacing(1)}}}));var U=function(e){return r.a.createElement(v.a,null,r.a.createElement(E.a,null,r.a.createElement(p.a,{id:"name",label:"Name",variant:"outlined"}),r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",className:W().margin,onClick:function(){var t=e.session,a=document.getElementById("name").value.toUpperCase();k.ref("".concat(j,"/").concat(t,"/players/").concat(a)).once("value",(function(n){null===n.val()?(k.ref("".concat(j,"/").concat(t,"/players/").concat(a)).update({player:a,on:0,aviable:0}),e.setAppState({player:a}),_("session",t),_("player",a)):console.log("already exist")}))}},"Create player")))},P=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).kickPlayer=function(e){var t=n.props,a=t.session,r=t.players,o=t.order;r[e]={},o=(o=o||[]).filter((function(t){return e!==t})),k.ref("".concat(j,"/").concat(a,"/")).update({players:r,order:o})},n.state={open:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.players,n=t.order;n=n||Object.keys(a);var o=this.state.open;return r.a.createElement(v.a,null,r.a.createElement(E.a,{button:!0,onClick:function(){return e.setState({open:!o})}},r.a.createElement(d.a,{primary:"Players"}),o?r.a.createElement(h.a,null):r.a.createElement(g.a,null)),r.a.createElement(f.a,{in:o,timeout:"auto",unmountOnExit:!0},r.a.createElement(v.a,null,n.map((function(t){return r.a.createElement(E.a,{key:t},r.a.createElement(d.a,null,"player: ",t),r.a.createElement(m.a,{variant:"extended",color:"secondary","aria-label":"join",onClick:function(){return e.kickPlayer(t)}},"Kick Player from Game"))})))))}}]),a}(r.a.Component),T=a(242),I=a(93),N=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={page:0,person:0},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.order,n=t.artSets,o=this.state,l=o.page,i=o.person,c=n[a[i]][l];return r.a.createElement("div",null,r.a.createElement("h3",null,"Results"),r.a.createElement(T.a,null,"the title was ",c.title," (from: ",c.titleFrom,")"),r.a.createElement(I.SketchField,{name:"sketch",className:"canvas-area",ref:function(t){return e._sketch=t},lineWidth:0,fillColor:"transparent",backgroundColor:"transparent",lineColor:"transparent",width:420,height:420,value:c.image}),r.a.createElement(T.a,null,"(by: ",c.imageFrom,")"),!!c.guess&&r.a.createElement(T.a,null,"the guess was ",c.guess," (from: ",c.guessFrom,")"),r.a.createElement("div",null,l>0&&r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:function(){return e.setState({page:l-1})}},"Prev Page"),l+1<n[a[i]].length&&!!n[a[i]][l+1].image&&r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:function(){return e.setState({page:l+1})}},"Next Page")),r.a.createElement("div",null,i>0&&r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:function(){return e.setState({person:i-1,page:0})}},"Prev Person"),i+1<a.length&&r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:function(){return e.setState({person:i+1,page:0})}},"Next Person")))}}]),a}(r.a.Component),R=a(1432),A=a(1439),F=a(1435),B=a(1442),D=a(1433),L=a(1434),M=a(604),G=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._renderWaiting=function(){var e=n.state.players;return r.a.createElement("div",null,r.a.createElement("h3",null,"Waiting for game to start"),Object.keys(e).length>1&&r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:n.startGame},"Start Game"))},n.shuffle=function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e},n.startGame=function(){var e=n.props.session,t=n.state.players;k.ref("".concat(j,"/").concat(e)).update({order:n.shuffle(Object.keys(t)),gameState:w.playing,max:Object.keys(t).length})},n.findOffset=function(){var e=n.state.order,t=n.props.player,a=-1;return e.forEach((function(e,n){t===e&&(a=n)})),a},n._renderPlaying=function(){var e=n.state,t=e.artSets,a=e.order,o=e.players,l=e.max,i=e.toolkitOpen,c=e.canRedo,s=e.canUndo,u=n.props.player;t=t||[];var y=n.findOffset(),b=o[u],k=b.on,j=b.aviable;if(k>=l)return r.a.createElement("div",null,r.a.createElement(T.a,null,"Waiting for game to end"));if(k>j)return r.a.createElement("div",null,r.a.createElement(T.a,null,"Waiting on more stuff"));var S=t[a[(a.length+(y-k)%a.length)%a.length]],w=(S=S||[])[S.length-1]||{};return r.a.createElement("div",null,w.title?!w.image&&r.a.createElement(T.a,null,"The Title is ",w.title):r.a.createElement(p.a,{id:"title",label:"Title",variant:"outlined"}),!w.image&&r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(E.a,{button:!0,onClick:function(){return n.setState({toolkitOpen:!i})}},r.a.createElement(d.a,{primary:"Toolkit"}),i?r.a.createElement(h.a,null):r.a.createElement(g.a,null)),r.a.createElement(f.a,{in:i,timeout:"auto",unmountOnExit:!0},r.a.createElement(v.a,null,r.a.createElement(E.a,null,r.a.createElement(R.a,{disabled:!s,onClick:n._undo},r.a.createElement(D.a,null)),r.a.createElement(R.a,{disabled:!c,onClick:n._redo},r.a.createElement(L.a,null))),r.a.createElement(E.a,null,r.a.createElement(d.a,null,"Tool:"),r.a.createElement(A.a,{labelId:"tools",id:"tools",value:n.state.tool,onChange:function(e){"eraser"!==e.target.value?n.setState({tool:e.target.value}):n.setState({tool:I.Tools.Pencil,lineColor:"#fffff0"})}},r.a.createElement(F.a,{value:I.Tools.Pencil},"Pencil"),r.a.createElement(F.a,{value:I.Tools.Line},"Line"),r.a.createElement(F.a,{value:I.Tools.Rectangle},"Rectangle"),r.a.createElement(F.a,{value:I.Tools.Circle},"Circle"),r.a.createElement(F.a,{value:"eraser"},"Eraser"))),r.a.createElement(E.a,null,r.a.createElement(d.a,null,"line color:"),r.a.createElement(M.BlockPicker,{triangle:"hide",color:n.state.lineColor,colors:n.state.colors,onChange:function(e){var t=n.state.colors;t.includes(e.hex)&&t.push(e.hex),n.setState({lineColor:e.hex,colors:t})}})),r.a.createElement(E.a,null,r.a.createElement(d.a,null,"Width:"),r.a.createElement(B.a,{defaultValue:n.state.lineWidth,valueLabelDisplay:"auto",step:1,min:1,max:25,onChange:function(e,t){return n.setState({lineWidth:t})}})))))),r.a.createElement(I.SketchField,{name:"sketch",className:"canvas-area",ref:function(e){return n._sketch=e},lineColor:n.state.lineColor,lineWidth:w.image?0:n.state.lineWidth,fillColor:"#fffff0",backgroundColor:"#fffff0",width:420,height:420,tool:n.state.tool,value:w.image,onChange:n._onSketchChange}),!!w.image&&r.a.createElement(p.a,{id:"guess",label:"Guess",variant:"outlined"}),r.a.createElement(m.a,{variant:"extended",color:"primary","aria-label":"join",onClick:n.submit},"Submit"))},n._onSketchChange=function(){var e=n.state.canUndo,t=n._sketch.canUndo();e!==t&&n.setState({canUndo:t})},n._undo=function(){n._sketch.undo(),n.setState({canUndo:n._sketch.canUndo(),canRedo:n._sketch.canRedo()})},n._redo=function(){n._sketch.redo(),n.setState({canUndo:n._sketch.canUndo(),canRedo:n._sketch.canRedo()})},n.submit=function(){var e=n.props,t=e.player,a=e.session,r=n.state,o=r.order,l=r.players,i=r.artSets,c=document.getElementById("title"),s=document.getElementById("guess");i=i||[];var u=n.findOffset(),m=l[t].on,p=o[(o.length+(u-m)%o.length)%o.length],d=i[p]||[];c&&(c=c.value,d.push({title:c,titleFrom:t}));var f=d[d.length-1];s?(f.guess=s.value,d[d.length-1]=f,f.guessFrom=t,d.push({title:s.value,titleFrom:t}),s.value=""):(f.image=JSON.stringify(n._sketch.toJSON()),f.imageFrom=t,d[d.length-1]=f);var h={};h[p]=d,k.ref("".concat(j,"/").concat(a,"/artSets/")).update(h),k.ref("".concat(j,"/").concat(a,"/players/").concat(t)).update({on:m+1});var g=o[(u+1)%o.length],v=l[g].aviable;k.ref("".concat(j,"/").concat(a,"/players/").concat(g)).update({aviable:v+1})},n.state={loading:!0,lineWidth:5,lineColor:"black",tool:I.Tools.Pencil,toolkitOpen:!1,canRedo:!1,canUndo:!1,colors:["black","red","purple","blue","green","yellow","orange"]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.session;k.ref("".concat(j,"/").concat(t)).on("value",(function(t){var a=t.val(),n=a.players,r=a.gameState,o=a.order,l=a.artSets,i=a.max;r===w.playing&&(r=w.reviewing,o.forEach((function(e){n[e].on<i&&(r=w.playing)}))),e.setState({loading:!1,gameState:r,players:n,order:o,artSets:l,max:i})}))}},{key:"render",value:function(){var e=this.props.session,t=this.state,a=t.loading,n=t.gameState,o=t.players,l=t.order,i=t.artSets;return a?r.a.createElement("h2",null,"loading..."):r.a.createElement("div",null,n===w.waiting&&this._renderWaiting(),n===w.playing&&this._renderPlaying(),n===w.reviewing&&r.a.createElement(N,{order:l,artSets:i}),r.a.createElement(P,{players:o,order:l,session:e}))}}]),a}(r.a.Component),V=a(1436),J=a(1437),H=a(605),Q=a.n(H),K=a(607),z=a(606),X=a.n(z),Y=a(1438),$=a(132),q=a.n($),Z=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(T.a,{variant:"h6"},"How To Play"),r.a.createElement(T.a,null,"1) Either create or join a session."),r.a.createElement(T.a,null,"2) Wait for all the other players to join then click start."),r.a.createElement(T.a,null,"3) Enter the Title of your image and draw it. When done hit submit."),r.a.createElement(T.a,null,"4) Wait for the person before you to finish there round."),r.a.createElement(T.a,null,"5) When you recieve an image you guess what the title should be. When you get a Title draw the image."),r.a.createElement(T.a,null,"6) When everything is done review the images!"))}}]),a}(r.a.Component),ee=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).toHome=function(){window.history.pushState({},"home","?"),n.props.setAppState({session:null,player:null})},n.state={open:!1,el:null},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"grow"},r.a.createElement(V.a,{position:"static"},r.a.createElement(J.a,null,r.a.createElement(T.a,{className:{grow:{flexGrow:1},sectionDesktop:{display:"none"}}.title,variant:"h6",noWrap:!0},this.props.name),r.a.createElement("div",{className:"grow"}),r.a.createElement("div",{className:"sectionDesktop"},r.a.createElement(q.a,{variant:"popover",popupId:"info-popup"},(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,Object.assign({color:"inherit"},Object($.bindTrigger)(e)),r.a.createElement(Q.a,null)),r.a.createElement(K.a,Object($.bindMenu)(e),r.a.createElement(Z,null)))})),r.a.createElement(q.a,{variant:"popover",popupId:"menu-popup"},(function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,Object.assign({color:"inherit"},Object($.bindTrigger)(t)),r.a.createElement(X.a,null)),r.a.createElement(K.a,Object($.bindMenu)(t),e.props.session&&r.a.createElement(F.a,{onClick:e.toHome},"To Home Page"),e.props.reset&&e.props.session&&r.a.createElement("div",null,r.a.createElement(F.a,{onClick:e.props.reset},"Reset Session"),r.a.createElement(Y.a,null)),e.props.session&&r.a.createElement("div",null,r.a.createElement(F.a,null,"To share"),r.a.createElement(F.a,null,r.a.createElement(p.a,{value:document.URL})),r.a.createElement(F.a,null,"Copy Url"),r.a.createElement(Y.a,null)),r.a.createElement(F.a,{onClick:function(){return window.location.href="http://www.github.com/kyleroush/".concat(e.props.repo,"/issues")}},"Log issue")))}))))))}}]),a}(r.a.Component),te=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getQueryVariables=function(){for(var e=window.location.search.substring(1).split("&"),t={},a=0;a<e.length;a++){var n=e[a].split("=");t[n[0]]=n[1]}return t},n.setValue=function(e){n.setState(e)},n.reset=function(){var e=n.state.session;k.ref("".concat(j,"/").concat(e)).once("value",(function(t){var a={};Object.keys(t.val().players).forEach((function(e){a[e]={name:e,on:0,aviable:0}})),k.ref("".concat(j,"/").concat(e)).update({gameState:w.waiting,order:[],artSets:{},max:null,players:a})}))},n.state={session:null,player:null},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.getQueryVariables(),a=t.session,n=t.player;a&&(a=a.toUpperCase(),k.ref("".concat(j,"/").concat(a)).once("value",(function(t){null!==t.val()&&(e.setState({session:a,config:t.val().config}),x("session")!==a||n||(n=x("player")),n&&(n=n.toUpperCase(),k.ref("".concat(j,"/").concat(a,"/players/").concat(n)).once("value",(function(t){null!==t.val()&&e.setState({player:n})}))))})))}},{key:"render",value:function(){var e=this.state,t=e.session,a=e.player;return r.a.createElement("div",null,r.a.createElement(ee,{session:t,name:"telestrations",repo:"telestration",reset:this.reset,setAppState:this.setValue}),t&&r.a.createElement("h2",null,"You ",a&&"(".concat(a,")")," are part of session ",t," "),null==t&&r.a.createElement(C,{setAppState:this.setValue}),null!=t&&null==a&&r.a.createElement(U,{session:t,setAppState:this.setValue}),null!=t&&null!=a&&r.a.createElement(G,{session:t,player:a}))}}]),a}(r.a.Component),ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(te,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("https://kyleroush.github.io/telestration",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("https://kyleroush.github.io/telestration","/service-worker.js");ae?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ne(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ne(t,e)}))}}()},381:function(e,t){},613:function(e,t,a){e.exports=a(1383)},618:function(e,t,a){},681:function(e,t){},682:function(e,t){},766:function(e,t){},768:function(e,t){},776:function(e,t){},778:function(e,t){},787:function(e,t){},789:function(e,t){},814:function(e,t){},816:function(e,t){},817:function(e,t){},823:function(e,t){},825:function(e,t){},843:function(e,t){},846:function(e,t){},862:function(e,t){},865:function(e,t){},887:function(e,t){}},[[613,1,2]]]);
//# sourceMappingURL=main.aa455b7c.chunk.js.map